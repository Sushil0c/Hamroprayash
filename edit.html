<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Edit Note</title>
</head>
<body>
    <h1>Edit Note</h1>
    <form id="edit-form">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title">

        <label for="body">Body:</label>
        <textarea id="body" name="body"></textarea>

        <button type="submit">Save Changes</button>
    </form>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuidv4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script>
        const notes = JSON.parse(localStorage.getItem('notes')) || [];
        const url = window.location.href;
        const noteId = url.substring(url.lastIndexOf('#') + 1);

        const note = notes.find(note => note.id === noteId);

        if (note) {
            document.getElementById('title').value = note.title;
            document.getElementById('body').value = note.body;
        } else {
            alert('Note not found!');
            // Redirect or handle error as needed
        }

        document.getElementById('edit-form').addEventListener('submit', function (event) {
            event.preventDefault();

            const title = document.getElementById('title').value;
            const body = document.getElementById('body').value;

            const updatedNote = {
                id: noteId,
                title: title,
                body: body,
                createdAt: note.createdAt,
                updatedAt: moment().valueOf()
            };

            const updatedNotes = notes.map(note => {
                if (note.id === noteId) {
                    return updatedNote;
                }
                return note;
            });

            localStorage.setItem('notes', JSON.stringify(updatedNotes));
            alert('Note updated successfully!');
        });
    </script>
</body>
</html>